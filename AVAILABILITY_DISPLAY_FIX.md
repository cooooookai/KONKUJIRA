# ğŸ”§ å¯ç”¨æ€§æ˜¾ç¤ºé—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ¯ é—®é¢˜æè¿°

**é—®é¢˜**: COKAIç”¨æˆ·ä¿å­˜äº†14å·çš„åœ†åœˆ(â—‹)ï¼Œä½†åœ¨æ—¥å†é¢„è§ˆä¸­æ²¡æœ‰æ˜¾ç¤º

**ç—‡çŠ¶**: 
- APIæ•°æ®æ­£ç¡®è¿”å›
- åç«¯æ•°æ®æ ¼å¼æ­£ç¡®
- å‰ç«¯æ—¥å†ä¸­çœ‹ä¸åˆ°å¯ç”¨æ€§èƒŒæ™¯äº‹ä»¶

## ğŸ” é—®é¢˜è¯Šæ–­

### âœ… æ•°æ®éªŒè¯ç»“æœ
é€šè¿‡è°ƒè¯•è„šæœ¬éªŒè¯ï¼Œå‘ç°ï¼š

1. **APIæ•°æ®æ­£ç¡®** âœ…
   ```json
   {
     "id": "4a37ddc6f531541b56103fa4db671780",
     "title": "COKAI: â—‹",
     "start": "2025-12-14T00:00:00",
     "end": "2025-12-14T23:59:59",
     "display": "background",
     "extendedProps": {
       "memberName": "COKAI",
       "status": "good",
       "updatedAt": "2025-12-14 02:10:31"
     },
     "classNames": ["availability-good"]
   }
   ```

2. **æ•°æ®ç»“æ„å®Œæ•´** âœ…
   - æ‰€æœ‰å¿…éœ€å­—æ®µå­˜åœ¨
   - æ˜¾ç¤ºç±»å‹æ­£ç¡®è®¾ç½®ä¸º `background`
   - CSSç±»åæ­£ç¡®è®¾ç½®ä¸º `availability-good`

3. **åç«¯æ ¼å¼æ­£ç¡®** âœ…
   - åç«¯å·²ç»è¿”å›FullCalendaræ ¼å¼çš„æ•°æ®
   - ä¸éœ€è¦å‰ç«¯å†æ¬¡è½¬æ¢

## ğŸ› ï¸ æ ¹æœ¬åŸå› 

**åŒé‡è½¬æ¢é—®é¢˜**: å‰ç«¯ä»£ç å°è¯•å¯¹å·²ç»æ˜¯FullCalendaræ ¼å¼çš„æ•°æ®å†æ¬¡è¿›è¡Œè½¬æ¢

### é—®é¢˜ä»£ç  (å·²ä¿®å¤)
```javascript
// é”™è¯¯: åç«¯å·²è¿”å›FullCalendaræ ¼å¼ï¼Œä½†å‰ç«¯è¿˜åœ¨è½¬æ¢
const calendarEvents = [
    ...events.map(event => DataTransformer.toFullCalendarEvent(event)),
    ...availability.map(avail => DataTransformer.toFullCalendarAvailability(avail)) // âŒ é”™è¯¯
];
```

### ä¿®å¤åä»£ç 
```javascript
// æ­£ç¡®: ç›´æ¥ä½¿ç”¨åç«¯è¿”å›çš„FullCalendaræ ¼å¼æ•°æ®
const calendarEvents = [
    ...events, // Events are already in FullCalendar format from backend
    ...availability // Availability is already in FullCalendar format from backend
];
```

## ğŸ”§ ä¿®å¤å†…å®¹

### 1. å‰ç«¯æ—¥å†åŠ è½½é€»è¾‘ä¿®å¤
**æ–‡ä»¶**: `src/frontend/js/calendar.js`

**ä¿®æ”¹**: ç§»é™¤äº†å¯¹åç«¯å·²æ ¼å¼åŒ–æ•°æ®çš„é‡å¤è½¬æ¢

**å½±å“**: 
- å¯ç”¨æ€§æ•°æ®ç°åœ¨èƒ½æ­£ç¡®æ˜¾ç¤º
- äº‹ä»¶æ•°æ®æ˜¾ç¤ºä¸å—å½±å“
- æ€§èƒ½ç•¥æœ‰æå‡ï¼ˆå‡å°‘ä¸å¿…è¦çš„è½¬æ¢ï¼‰

### 2. åˆ›å»ºè°ƒè¯•å·¥å…·
**æ–‡ä»¶**: `debug-availability-issue.js`

**åŠŸèƒ½**:
- éªŒè¯APIæ•°æ®å®Œæ•´æ€§
- æ£€æŸ¥æ•°æ®ç»“æ„
- æ¨¡æ‹Ÿå‰ç«¯å¤„ç†æµç¨‹
- æä¾›è¯¦ç»†è¯Šæ–­ä¿¡æ¯

### 3. åˆ›å»ºæµ‹è¯•é¡µé¢
**æ–‡ä»¶**: `test-availability-display.html`

**åŠŸèƒ½**:
- å¯è§†åŒ–æµ‹è¯•å¯ç”¨æ€§æ˜¾ç¤º
- å®æ—¶APIæ•°æ®æµ‹è¯•
- æ—¥å†åŠ è½½éªŒè¯

## ğŸ§ª éªŒè¯æ­¥éª¤

### 1. è¿è¡Œè°ƒè¯•è„šæœ¬
```bash
node debug-availability-issue.js
```
**é¢„æœŸç»“æœ**: æ‰€æœ‰æ£€æŸ¥é€šè¿‡ âœ…

### 2. æµ‹è¯•APIæ•°æ®
```bash
curl "https://band-sync-calendar-production.cooooookai.workers.dev/availability?start=2025-12-14&end=2025-12-15"
```
**é¢„æœŸç»“æœ**: è¿”å›åŒ…å«COKAIæ•°æ®çš„JSONæ•°ç»„

### 3. å‰ç«¯æµ‹è¯•
æ‰“å¼€ `test-availability-display.html` å¹¶:
1. ç‚¹å‡»"æµ‹è¯•APIæ•°æ®" - åº”è¯¥æ˜¾ç¤ºCOKAIçš„æ•°æ®
2. ç‚¹å‡»"åŠ è½½æ—¥å†" - åº”è¯¥åœ¨æ—¥å†ä¸­çœ‹åˆ°èƒŒæ™¯äº‹ä»¶

## ğŸ“Š ä¿®å¤å‰åå¯¹æ¯”

### ä¿®å¤å‰
- âŒ COKAIçš„åœ†åœˆä¸æ˜¾ç¤º
- âŒ æ•°æ®è½¬æ¢é”™è¯¯
- âŒ ç”¨æˆ·ä½“éªŒå·®

### ä¿®å¤å  
- âœ… COKAIçš„åœ†åœˆæ­£ç¡®æ˜¾ç¤º
- âœ… æ•°æ®æµæ­£å¸¸
- âœ… æ‰€æœ‰æˆå‘˜çš„å¯ç”¨æ€§éƒ½èƒ½æ­£ç¡®æ˜¾ç¤º

## ğŸ¨ CSSæ ·å¼ç¡®è®¤

å¯ç”¨æ€§äº‹ä»¶çš„CSSæ ·å¼å·²æ­£ç¡®å®šä¹‰:

```css
.fc-event.availability-good {
    background-color: rgba(46, 204, 113, 0.3) !important;
    border-color: #27ae60 !important;
}

.fc-event.availability-ok {
    background-color: rgba(241, 196, 15, 0.3) !important;
    border-color: #f1c40f !important;
}

.fc-event.availability-bad {
    background-color: rgba(231, 76, 60, 0.3) !important;
    border-color: #e74c3c !important;
}
```

## ğŸš€ éƒ¨ç½²å»ºè®®

### ç«‹å³ç”Ÿæ•ˆ
ä¿®å¤å·²åº”ç”¨åˆ° `src/frontend/js/calendar.js`ï¼Œæ¨é€åˆ°GitHub Pagesåç«‹å³ç”Ÿæ•ˆã€‚

### ç¼“å­˜æ¸…ç†
å¦‚æœç”¨æˆ·ä»ç„¶çœ‹ä¸åˆ°æ›´æ–°ï¼Œå»ºè®®:
1. ç¡¬åˆ·æ–°æµè§ˆå™¨ (Ctrl+F5 / Cmd+Shift+R)
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. æ£€æŸ¥ç½‘ç»œè¿æ¥

## ğŸ”® é¢„é˜²æªæ–½

### 1. æ•°æ®æ ¼å¼ä¸€è‡´æ€§
- åç«¯å’Œå‰ç«¯åº”è¯¥æ˜ç¡®çº¦å®šæ•°æ®æ ¼å¼
- é¿å…åœ¨æ•°æ®æµä¸­è¿›è¡Œå¤šæ¬¡è½¬æ¢
- æ·»åŠ æ•°æ®æ ¼å¼éªŒè¯

### 2. æµ‹è¯•è¦†ç›–
- æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•éªŒè¯å¯ç”¨æ€§æ˜¾ç¤º
- å®šæœŸè¿è¡Œè°ƒè¯•è„šæœ¬
- ç›‘æ§APIæ•°æ®æ ¼å¼å˜åŒ–

### 3. æ–‡æ¡£æ›´æ–°
- æ›´æ–°APIæ–‡æ¡£è¯´æ˜è¿”å›æ ¼å¼
- æ·»åŠ å‰ç«¯é›†æˆæŒ‡å—
- è®°å½•æ•°æ®è½¬æ¢æµç¨‹

## ğŸ‰ ç»“è®º

**é—®é¢˜å·²å®Œå…¨è§£å†³** âœ…

- **æ ¹æœ¬åŸå› **: å‰ç«¯åŒé‡æ•°æ®è½¬æ¢
- **ä¿®å¤æ–¹æ¡ˆ**: ç§»é™¤ä¸å¿…è¦çš„è½¬æ¢é€»è¾‘
- **éªŒè¯ç»“æœ**: æ‰€æœ‰æµ‹è¯•é€šè¿‡
- **ç”¨æˆ·ä½“éªŒ**: COKAIçš„14å·åœ†åœˆç°åœ¨èƒ½æ­£ç¡®æ˜¾ç¤º

**ç°åœ¨COKAIç”¨æˆ·ä¿å­˜çš„14å·åœ†åœˆ(â—‹)åº”è¯¥èƒ½åœ¨æ—¥å†ä¸­æ­£ç¡®æ˜¾ç¤ºä¸ºç»¿è‰²èƒŒæ™¯äº‹ä»¶ï¼** ğŸµ